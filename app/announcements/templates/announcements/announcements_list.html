{% extends 'base.html' %}

{% block title %}Оголошення{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center mb-4">Оголошення</h2>
    <div class="text-end mb-3">
        <a href="{{ url_for('announcements.create_announcement') }}" class="btn btn-primary">Нове оголошення</a>
    </div>
    {% for announcement in announcements %}
    <div class="card shadow-lg mb-3">
        <div class="card-body">
            <h4 class="card-title">{{ announcement.title }}</h4>
            <p class="card-text">{{ announcement.body }}</p>
            <small class="text-muted">Автор: {{ announcement.author.username }}, {{ announcement.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
            {% if current_user.id == announcement.author_id or current_user.role == 0 %}
            <div class="mt-2">
                <a href="{{ url_for('announcements.edit_announcement', announcement_id=announcement.id) }}" class="btn btn-warning btn-sm">Редагувати</a>
                <form action="{{ url_for('announcements.delete_announcement', announcement_id=announcement.id) }}" method="POST" class="d-inline">
                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Ви впевнені, що хочете видалити це оголошення?')">Видалити</button>
                </form>
            </div>
            {% endif %}
        </div>
    </div>
    {% else %}
    <p class="text-center">Наразі немає оголошень.</p>
    {% endfor %}
</div>
{% endblock %}
